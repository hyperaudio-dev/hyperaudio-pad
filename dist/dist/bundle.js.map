{"version":3,"sources":["webpack:///dist/bundle.js","webpack:///webpack/bootstrap 8e94757e0933e55870cd","webpack:///./src/player.js","webpack:///./src/hyperaudio.js","webpack:///./src/source.js","webpack:///./src/sink.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_classCallCheck","instance","Constructor","TypeError","value","_createClass","defineProperties","target","props","length","descriptor","writable","key","protoProps","staticProps","Player","rootNodeOrSelector","collectionSelector","arguments","undefined","itemSelector","this","root","document","querySelector","item","console","log","getAttribute","default","_interopRequireDefault","obj","_player","_source","_sink","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","_player2","Source","_Player","_this","getPrototypeOf","addEventListener","onSelectionChange","bind","onMouseUp","selection","window","getSelection","rangeCount","range","getRangeAt","commonAncestor","commonAncestorContainer","nodeType","TEXT_NODE","setStartBefore","parentNode","matches","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","querySelectorAll","Symbol","iterator","next","done","selected","containsNode","classList","remove","removeAttribute","err","return","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","getElementsByTagName","candidate","nodeName","add","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","node","setAttribute","onDragStart","setEndAfter","removeAllRanges","event","createElement","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","clone","cloneNode","appendChild","dataTransfer","setData","outerHTML","effectAllowed","dropEffect","_get","receiver","Function","desc","getOwnPropertyDescriptor","parent","Sink","collection","onDragOver","onDragEnter","onDragEnd","onDrop","setup","onDragEnd2","preventDefault","stopPropagation","html","getData","wrapper","innerHTML","children","insertBefore"],"mappings":"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","file":"dist/bundle.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"http://localhost:5555/dist/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 1);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Player = function () {\n  function Player(rootNodeOrSelector) {\n    var collectionSelector = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'article';\n    var itemSelector = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'section';\n\n    _classCallCheck(this, Player);\n\n    this.collectionSelector = collectionSelector;\n    this.itemSelector = itemSelector;\n    this.root = typeof rootNodeOrSelector === 'string' ? document.querySelector(rootNodeOrSelector) : rootNodeOrSelector;\n  }\n\n  _createClass(Player, [{\n    key: 'setup',\n    value: function setup(item) {\n      console.log('TODO setup player for', item.getAttribute('data-src'));\n    }\n  }]);\n\n  return Player;\n}();\n\nexports.default = Player;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(2);\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _player = __webpack_require__(0);\n\nvar _player2 = _interopRequireDefault(_player);\n\nvar _source = __webpack_require__(3);\n\nvar _source2 = _interopRequireDefault(_source);\n\nvar _sink = __webpack_require__(4);\n\nvar _sink2 = _interopRequireDefault(_sink);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Hyperaudio = function Hyperaudio() {\n  var nodeOrSelector = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : document;\n\n  _classCallCheck(this, Hyperaudio);\n\n  this.node = typeof nodeOrSelector === 'string' ? document.querySelector(nodeOrSelector) : nodeOrSelector;\n\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = this.node.querySelectorAll('.hyperaudio-source')[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var source = _step.value;\n\n      new _source2.default(source);\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = this.node.querySelectorAll('.hyperaudio-sink')[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var sink = _step2.value;\n\n      new _sink2.default(sink);\n    }\n\n    // for (const player of this.node.querySelectorAll('.hyperaudio-player')) {\n    //   new Player(player);\n    // }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2.return) {\n        _iterator2.return();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n};\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _player = __webpack_require__(0);\n\nvar _player2 = _interopRequireDefault(_player);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Source = function (_Player) {\n  _inherits(Source, _Player);\n\n  function Source(rootNodeOrSelector) {\n    var collectionSelector = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'article';\n    var itemSelector = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'section';\n\n    _classCallCheck(this, Source);\n\n    var _this = _possibleConstructorReturn(this, (Source.__proto__ || Object.getPrototypeOf(Source)).call(this, rootNodeOrSelector));\n\n    document.addEventListener('selectionchange', _this.onSelectionChange.bind(_this));\n    document.addEventListener('mouseup', _this.onMouseUp.bind(_this));\n    return _this;\n  }\n\n  _createClass(Source, [{\n    key: 'onSelectionChange',\n    value: function onSelectionChange() {\n      var selection = window.getSelection();\n      if (selection.rangeCount === 0) return;\n\n      var range = selection.getRangeAt(0);\n      var commonAncestor = range.commonAncestorContainer;\n\n      if (commonAncestor.nodeType === document.TEXT_NODE) {\n        range.setStartBefore(commonAncestor.parentNode);\n        return;\n      }\n\n      if (!(commonAncestor.matches('section[data-src]') || commonAncestor.parentNode.matches('section[data-src]'))) return;\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.root.querySelectorAll('.selected')[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var selected = _step.value;\n\n          if (selection.containsNode(selected, true) || selection.containsNode(selected.parentNode, true)) continue;\n          selected.classList.remove('selected');\n          selected.removeAttribute('draggable');\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = commonAncestor.getElementsByTagName('*')[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var candidate = _step2.value;\n\n          if (selection.containsNode(candidate, true) && candidate.nodeName !== 'P') {\n            candidate.classList.add('selected');\n          }\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n    }\n  }, {\n    key: 'onMouseUp',\n    value: function onMouseUp() {\n      var selection = window.getSelection();\n      var selected = this.root.querySelectorAll('.selected');\n\n      var _iteratorNormalCompletion3 = true;\n      var _didIteratorError3 = false;\n      var _iteratorError3 = undefined;\n\n      try {\n        for (var _iterator3 = selected[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n          var node = _step3.value;\n\n          if (selection.containsNode(node, true) || selection.containsNode(node.parentNode, true)) {\n            node.setAttribute('draggable', true);\n            node.addEventListener('dragstart', this.onDragStart.bind(this));\n            // node.addEventListener('dragend', this.onDragEnd.bind(this));\n          } else {\n            // console.log('kill', node);\n            node.classList.remove('selected');\n            node.removeAttribute('draggable');\n          }\n        }\n      } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion3 && _iterator3.return) {\n            _iterator3.return();\n          }\n        } finally {\n          if (_didIteratorError3) {\n            throw _iteratorError3;\n          }\n        }\n      }\n\n      if (selected.length > 0 && selection.rangeCount > 0) {\n        var range = selection.getRangeAt(0);\n        range.setStartBefore(selected.item(0));\n        range.setEndAfter(selected.item(selected.length - 1));\n      } else {\n        selection.removeAllRanges();\n      }\n    }\n  }, {\n    key: 'onDragStart',\n    value: function onDragStart(event) {\n      // event.preventDefault();\n      // event.stopPropagation();\n\n      var item = document.createElement('section');\n      var _iteratorNormalCompletion4 = true;\n      var _didIteratorError4 = false;\n      var _iteratorError4 = undefined;\n\n      try {\n        for (var _iterator4 = this.root.querySelectorAll('.selected')[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n          var selected = _step4.value;\n\n          var clone = selected.cloneNode(true);\n          clone.classList.remove('selected');\n          clone.removeAttribute('draggable');\n          item.appendChild(clone);\n        }\n      } catch (err) {\n        _didIteratorError4 = true;\n        _iteratorError4 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion4 && _iterator4.return) {\n            _iterator4.return();\n          }\n        } finally {\n          if (_didIteratorError4) {\n            throw _iteratorError4;\n          }\n        }\n      }\n\n      event.dataTransfer.setData('html', item.outerHTML);\n      event.dataTransfer.effectAllowed = 'copy';\n      event.dataTransfer.dropEffect = 'copy';\n\n      // return false;\n    }\n\n    // onDragEnd() {\n    //   for (const node of this.node.querySelectorAll('.selected')) {\n    //     node.classList.remove('selected');\n    //     node.removeAttribute('draggable');\n    //   }\n    // }\n\n  }]);\n\n  return Source;\n}(_player2.default);\n\nexports.default = Source;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _player = __webpack_require__(0);\n\nvar _player2 = _interopRequireDefault(_player);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Sink = function (_Player) {\n  _inherits(Sink, _Player);\n\n  function Sink(rootNodeOrSelector) {\n    var collectionSelector = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'article';\n    var itemSelector = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'section';\n\n    _classCallCheck(this, Sink);\n\n    var _this = _possibleConstructorReturn(this, (Sink.__proto__ || Object.getPrototypeOf(Sink)).call(this, rootNodeOrSelector, collectionSelector, itemSelector));\n\n    var collection = _this.root.querySelector(_this.collectionSelector);\n    collection.addEventListener('dragover', _this.onDragOver.bind(_this));\n    collection.addEventListener('dragenter', _this.onDragEnter.bind(_this));\n    // collection.addEventListener('dragleave', this.onDragLeave.bind(this));\n    collection.addEventListener('dragend', _this.onDragEnd.bind(_this));\n    collection.addEventListener('drop', _this.onDrop.bind(_this));\n\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = collection.querySelectorAll(_this.itemSelector)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var item = _step.value;\n\n        _this.setup(item);\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    return _this;\n  }\n\n  _createClass(Sink, [{\n    key: 'setup',\n    value: function setup(item) {\n      _get(Sink.prototype.__proto__ || Object.getPrototypeOf(Sink.prototype), 'setup', this).call(this, item);\n\n      item.setAttribute('draggable', true);\n      item.setAttribute('tabindex', 0);\n      item.addEventListener('dragstart', this.onDragStart.bind(this));\n      item.addEventListener('dragend', this.onDragEnd2.bind(this));\n    }\n  }, {\n    key: 'onDragStart',\n    value: function onDragStart(event) {\n      event.dataTransfer.setData('html', event.target.outerHTML);\n      event.dataTransfer.effectAllowed = 'copy';\n      event.dataTransfer.dropEffect = 'copy';\n    }\n  }, {\n    key: 'onDragEnd2',\n    value: function onDragEnd2(event) {\n      event.target.remove();\n    }\n  }, {\n    key: 'onDragOver',\n    value: function onDragOver(event) {\n      event.preventDefault();\n      event.stopPropagation();\n      return false;\n    }\n  }, {\n    key: 'onDragEnter',\n    value: function onDragEnter(event) {\n      event.preventDefault();\n      event.stopPropagation();\n\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = this.root.querySelectorAll('.over')[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var item = _step2.value;\n\n          item.classList.remove('over');\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      var target = event.target;\n      if (typeof target.matches !== 'function') return;\n      while (!target.matches(this.itemSelector + '[draggable]')) {\n        // FIXME\n        target = target.parentNode;\n        if (!target) return;\n        if (typeof target.matches !== 'function') return;\n      }\n\n      target.classList.add('over');\n    }\n\n    // onDragLeave(event) {}\n\n  }, {\n    key: 'onDragEnd',\n    value: function onDragEnd(event) {\n      var _iteratorNormalCompletion3 = true;\n      var _didIteratorError3 = false;\n      var _iteratorError3 = undefined;\n\n      try {\n        for (var _iterator3 = this.root.querySelectorAll('.over')[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n          var item = _step3.value;\n\n          item.classList.remove('over');\n        }\n      } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion3 && _iterator3.return) {\n            _iterator3.return();\n          }\n        } finally {\n          if (_didIteratorError3) {\n            throw _iteratorError3;\n          }\n        }\n      }\n    }\n  }, {\n    key: 'onDrop',\n    value: function onDrop(event) {\n      event.preventDefault();\n      var html = event.dataTransfer.getData('html');\n\n      var target = event.target;\n\n      var wrapper = document.createElement('div');\n      wrapper.innerHTML = html;\n      var item = wrapper.children[0];\n\n      if (target.nodeName === 'ARTICLE') {\n        // FIXME\n        target.appendChild(item);\n        this.setup(item);\n      } else {\n        while (!target.matches(this.itemSelector + '[draggable]')) {\n          // FIXME\n          target = target.parentNode;\n        }\n\n        target.parentNode.insertBefore(item, target);\n        this.setup(item);\n      }\n\n      this.onDragEnd();\n    }\n  }]);\n\n  return Sink;\n}(_player2.default);\n\nexports.default = Sink;\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// dist/bundle.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"http://localhost:5555/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 8e94757e0933e55870cd","// @flow\n\nexport default class Player {\n  constructor(rootNodeOrSelector, collectionSelector = 'article', itemSelector = 'section') {\n    this.collectionSelector = collectionSelector;\n    this.itemSelector = itemSelector;\n    this.root = typeof rootNodeOrSelector === 'string' ? document.querySelector(rootNodeOrSelector) : rootNodeOrSelector;\n  }\n\n  setup(item) {\n    console.log('TODO setup player for', item.getAttribute('data-src'));\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/player.js","import Player from './player';\nimport Source from './source';\nimport Sink from './sink';\n\nclass Hyperaudio {\n  constructor(nodeOrSelector = document) {\n    this.node = typeof nodeOrSelector === 'string' ? document.querySelector(nodeOrSelector) : nodeOrSelector;\n\n    for (const source of this.node.querySelectorAll('.hyperaudio-source')) {\n      new Source(source);\n    }\n\n    for (const sink of this.node.querySelectorAll('.hyperaudio-sink')) {\n      new Sink(sink);\n    }\n\n    // for (const player of this.node.querySelectorAll('.hyperaudio-player')) {\n    //   new Player(player);\n    // }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/hyperaudio.js","import Player from './player';\n\nexport default class Source extends Player {\n  constructor(rootNodeOrSelector, collectionSelector = 'article', itemSelector = 'section') {\n    super(rootNodeOrSelector);\n\n    document.addEventListener('selectionchange', this.onSelectionChange.bind(this));\n    document.addEventListener('mouseup', this.onMouseUp.bind(this));\n  }\n\n  onSelectionChange() {\n    const selection = window.getSelection();\n    if (selection.rangeCount === 0) return;\n\n    const range = selection.getRangeAt(0);\n    const commonAncestor = range.commonAncestorContainer;\n\n    if (commonAncestor.nodeType === document.TEXT_NODE) {\n      range.setStartBefore(commonAncestor.parentNode);\n      return;\n    }\n\n    if (!(commonAncestor.matches('section[data-src]') || commonAncestor.parentNode.matches('section[data-src]'))) return;\n\n    for (const selected of this.root.querySelectorAll('.selected')) {\n      if (selection.containsNode(selected, true) || selection.containsNode(selected.parentNode, true)) continue;\n      selected.classList.remove('selected');\n      selected.removeAttribute('draggable');\n    }\n\n    for (const candidate of commonAncestor.getElementsByTagName('*')) {\n      if (selection.containsNode(candidate, true) && candidate.nodeName !== 'P') {\n        candidate.classList.add('selected');\n      }\n    }\n  }\n\n  onMouseUp() {\n    const selection = window.getSelection();\n    const selected = this.root.querySelectorAll('.selected');\n\n    for (const node of selected) {\n      if (selection.containsNode(node, true) || selection.containsNode(node.parentNode, true)) {\n        node.setAttribute('draggable', true);\n        node.addEventListener('dragstart', this.onDragStart.bind(this));\n        // node.addEventListener('dragend', this.onDragEnd.bind(this));\n      } else {\n        // console.log('kill', node);\n        node.classList.remove('selected');\n        node.removeAttribute('draggable');\n      }\n    }\n\n    if (selected.length > 0 && selection.rangeCount > 0) {\n      const range = selection.getRangeAt(0);\n      range.setStartBefore(selected.item(0));\n      range.setEndAfter(selected.item(selected.length - 1));\n    } else {\n      selection.removeAllRanges();\n    }\n  }\n\n  onDragStart(event) {\n    // event.preventDefault();\n    // event.stopPropagation();\n\n    const item = document.createElement('section');\n    for (const selected of this.root.querySelectorAll('.selected')) {\n      const clone = selected.cloneNode(true);\n      clone.classList.remove('selected');\n      clone.removeAttribute('draggable');\n      item.appendChild(clone);\n    }\n\n    event.dataTransfer.setData('html', item.outerHTML);\n    event.dataTransfer.effectAllowed = 'copy';\n    event.dataTransfer.dropEffect = 'copy';\n\n    // return false;\n  }\n\n  // onDragEnd() {\n  //   for (const node of this.node.querySelectorAll('.selected')) {\n  //     node.classList.remove('selected');\n  //     node.removeAttribute('draggable');\n  //   }\n  // }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/source.js","import Player from './player';\n\nexport default class Sink extends Player {\n  constructor(rootNodeOrSelector, collectionSelector = 'article', itemSelector = 'section') {\n    super(rootNodeOrSelector, collectionSelector, itemSelector);\n\n    const collection = this.root.querySelector(this.collectionSelector);\n    collection.addEventListener('dragover', this.onDragOver.bind(this));\n    collection.addEventListener('dragenter', this.onDragEnter.bind(this));\n    // collection.addEventListener('dragleave', this.onDragLeave.bind(this));\n    collection.addEventListener('dragend', this.onDragEnd.bind(this));\n    collection.addEventListener('drop', this.onDrop.bind(this));\n\n    for (const item of collection.querySelectorAll(this.itemSelector)) {\n      this.setup(item);\n    }\n  }\n\n  setup(item) {\n    super.setup(item);\n\n    item.setAttribute('draggable', true);\n    item.setAttribute('tabindex', 0);\n    item.addEventListener('dragstart', this.onDragStart.bind(this));\n    item.addEventListener('dragend', this.onDragEnd2.bind(this));\n  }\n\n  onDragStart(event) {\n    event.dataTransfer.setData('html', event.target.outerHTML);\n    event.dataTransfer.effectAllowed = 'copy';\n    event.dataTransfer.dropEffect = 'copy';\n  }\n\n  onDragEnd2(event) {\n    event.target.remove();\n  }\n\n  onDragOver(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    return false;\n  }\n\n  onDragEnter(event) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    for (const item of this.root.querySelectorAll('.over')) {\n      item.classList.remove('over');\n    }\n\n    let target = event.target;\n    if (typeof target.matches !== 'function') return;\n    while (!target.matches(this.itemSelector + '[draggable]')) { // FIXME\n      target = target.parentNode;\n      if (!target) return;\n      if (typeof target.matches !== 'function') return;\n    }\n\n    target.classList.add('over');\n  }\n\n  // onDragLeave(event) {}\n\n  onDragEnd(event) {\n    for (const item of this.root.querySelectorAll('.over')) {\n      item.classList.remove('over');\n    }\n  }\n\n  onDrop(event) {\n    event.preventDefault();\n    const html = event.dataTransfer.getData('html');\n\n    let target = event.target;\n\n    const wrapper = document.createElement('div');\n    wrapper.innerHTML = html;\n    const item = wrapper.children[0];\n\n    if (target.nodeName === 'ARTICLE') { // FIXME\n      target.appendChild(item);\n      this.setup(item);\n    } else {\n      while (!target.matches(this.itemSelector + '[draggable]')) { // FIXME\n        target = target.parentNode;\n      }\n\n      target.parentNode.insertBefore(item, target);\n      this.setup(item);\n    }\n\n    this.onDragEnd();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/sink.js"],"sourceRoot":""}