!function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="http://localhost:5555/dist/",t(t.s=1)}([function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"article",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"section";n(this,e),this.collectionSelector=r,this.itemSelector=o,this.root="string"==typeof t?document.querySelector(t):t}return o(e,[{key:"setup",value:function(e){console.log("TODO setup player for",e.getAttribute("data-src"))}}]),e}();t.default=a},function(e,t,r){e.exports=r(2)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=r(0),a=(n(o),r(3)),i=(n(a),r(4));n(i)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(0),u=function(e){return e&&e.__esModule?e:{default:e}}(l),c=function(e){function t(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2];n(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return document.addEventListener("selectionchange",r.onSelectionChange.bind(r)),document.addEventListener("mouseup",r.onMouseUp.bind(r)),r}return a(t,e),i(t,[{key:"onSelectionChange",value:function(){var e=window.getSelection();if(0!==e.rangeCount){var t=e.getRangeAt(0),r=t.commonAncestorContainer;if(r.nodeType===document.TEXT_NODE)return void t.setStartBefore(r.parentNode);if(r.matches("section[data-src]")||r.parentNode.matches("section[data-src]")){var n=!0,o=!1,a=void 0;try{for(var i,l=this.root.querySelectorAll(".selected")[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var u=i.value;e.containsNode(u,!0)||e.containsNode(u.parentNode,!0)||(u.classList.remove("selected"),u.removeAttribute("draggable"))}}catch(e){o=!0,a=e}finally{try{!n&&l.return&&l.return()}finally{if(o)throw a}}var c=!0,s=!1,f=void 0;try{for(var d,v=r.getElementsByTagName("*")[Symbol.iterator]();!(c=(d=v.next()).done);c=!0){var p=d.value;e.containsNode(p,!0)&&"P"!==p.nodeName&&p.classList.add("selected")}}catch(e){s=!0,f=e}finally{try{!c&&v.return&&v.return()}finally{if(s)throw f}}}}}},{key:"onMouseUp",value:function(){var e=window.getSelection(),t=this.root.querySelectorAll(".selected"),r=!0,n=!1,o=void 0;try{for(var a,i=t[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var l=a.value;e.containsNode(l,!0)||e.containsNode(l.parentNode,!0)?(l.setAttribute("draggable",!0),l.addEventListener("dragstart",this.onDragStart.bind(this))):(l.classList.remove("selected"),l.removeAttribute("draggable"))}}catch(e){n=!0,o=e}finally{try{!r&&i.return&&i.return()}finally{if(n)throw o}}if(t.length>0&&e.rangeCount>0){var u=e.getRangeAt(0);u.setStartBefore(t.item(0)),u.setEndAfter(t.item(t.length-1))}else e.removeAllRanges()}},{key:"onDragStart",value:function(e){var t=document.createElement("section"),r=!0,n=!1,o=void 0;try{for(var a,i=this.root.querySelectorAll(".selected")[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var l=a.value,u=l.cloneNode(!0);u.classList.remove("selected"),u.removeAttribute("draggable"),t.appendChild(u)}}catch(e){n=!0,o=e}finally{try{!r&&i.return&&i.return()}finally{if(n)throw o}}e.dataTransfer.setData("html",t.outerHTML),e.dataTransfer.effectAllowed="copy",e.dataTransfer.dropEffect="copy"}}]),t}(u.default);t.default=c},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},u=r(0),c=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"article",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"section";n(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,a)),l=i.root.querySelector(i.collectionSelector);l.addEventListener("dragover",i.onDragOver.bind(i)),l.addEventListener("dragenter",i.onDragEnter.bind(i)),l.addEventListener("dragend",i.onDragEnd.bind(i)),l.addEventListener("drop",i.onDrop.bind(i));var u=!0,c=!1,s=void 0;try{for(var f,d=l.querySelectorAll(i.itemSelector)[Symbol.iterator]();!(u=(f=d.next()).done);u=!0){var v=f.value;i.setup(v)}}catch(e){c=!0,s=e}finally{try{!u&&d.return&&d.return()}finally{if(c)throw s}}return i}return a(t,e),i(t,[{key:"setup",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setup",this).call(this,e),e.setAttribute("draggable",!0),e.setAttribute("tabindex",0),e.addEventListener("dragstart",this.onDragStart.bind(this)),e.addEventListener("dragend",this.onDragEnd2.bind(this))}},{key:"onDragStart",value:function(e){e.dataTransfer.setData("html",e.target.outerHTML),e.dataTransfer.effectAllowed="copy",e.dataTransfer.dropEffect="copy"}},{key:"onDragEnd2",value:function(e){e.target.remove()}},{key:"onDragOver",value:function(e){return e.preventDefault(),e.stopPropagation(),!1}},{key:"onDragEnter",value:function(e){e.preventDefault(),e.stopPropagation();var t=!0,r=!1,n=void 0;try{for(var o,a=this.root.querySelectorAll(".over")[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){o.value.classList.remove("over")}}catch(e){r=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw n}}var i=e.target;if("function"==typeof i.matches){for(;!i.matches(this.itemSelector+"[draggable]");){if(!(i=i.parentNode))return;if("function"!=typeof i.matches)return}i.classList.add("over")}}},{key:"onDragEnd",value:function(e){var t=!0,r=!1,n=void 0;try{for(var o,a=this.root.querySelectorAll(".over")[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){o.value.classList.remove("over")}}catch(e){r=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw n}}}},{key:"onDrop",value:function(e){e.preventDefault();var t=e.dataTransfer.getData("html"),r=e.target,n=document.createElement("div");n.innerHTML=t;var o=n.children[0];if("ARTICLE"===r.nodeName)r.appendChild(o),this.setup(o);else{for(;!r.matches(this.itemSelector+"[draggable]");)r=r.parentNode;r.parentNode.insertBefore(o,r),this.setup(o)}this.onDragEnd()}}]),t}(c.default);t.default=s}]);
//# sourceMappingURL=bundle.js.map